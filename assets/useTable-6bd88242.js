import{r as t,V as a,G as e,a as s,J as n,k as l,O as o}from"./index-69408057.js";import{E as c}from"./el-message-box-b134f776.js";import"./el-button-15b7c91f.js";import"./el-input-b7d095a0.js";import"./el-overlay-32a1ff02.js";const{t:i}=l(),u=l=>{const{immediate:u=!0}=l,m=t(!1),r=t(1),d=t(10),g=t(0),p=t([]);a((()=>r.value),(()=>{f.getList()})),a((()=>d.value),(()=>{1===s(r)||(r.value=1),f.getList()})),e((()=>{u&&f.getList()}));const v=t(),y=t(),w=async()=>{await o();const t=s(v);return t},f={getList:async()=>{m.value=!0;try{const t=await(null==l?void 0:l.fetchDataApi());t&&(p.value=t.list,g.value=t.total||0)}catch(t){}finally{m.value=!1}},setProps:async(t={})=>{const a=await w();null==a||a.setProps(t)},setColumn:async t=>{const a=await w();null==a||a.setColumn(t)},addColumn:async(t,a)=>{const e=await w();null==e||e.addColumn(t,a)},delColumn:async t=>{const a=await w();null==a||a.delColumn(t)},getElTableExpose:async()=>(await w(),s(y)),refresh:()=>{f.getList()},delList:async t=>{const{fetchDelApi:a}=l;a&&c.confirm(i("common.delMessage"),i("common.delWarning"),{confirmButtonText:i("common.delOk"),cancelButtonText:i("common.delCancel"),type:"warning"}).then((async()=>{if(await a()){n.success(i("common.delSuccess"));const a=(s(g)%s(d)===t||1===s(d))&&s(r)>1?s(r)-1:s(r);r.value=a,f.getList()}}))}};return{tableRegister:(t,a)=>{v.value=t,y.value=s(a)},tableMethods:f,tableState:{currentPage:r,pageSize:d,total:g,dataList:p,loading:m}}};export{u};
